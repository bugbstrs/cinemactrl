<div class="p-4">
    <p-card [header]="isEditMode ? 'Edit Showing' : 'Create Showing'" styleClass="shadow-lg">
        <form [formGroup]="showingForm" (ngSubmit)="onSubmit()">
            <div class="grid">
                <div class="col-12 md:col-6 field">
                    <label for="movieId">Movie</label>
                    <p-dropdown id="movieId" [options]="movies" optionLabel="name" optionValue="id"
                        formControlName="movieId" placeholder="Select a movie" [filter]="true"
                        class="w-full"></p-dropdown>
                    <small *ngIf="showingForm.get('movieId')?.invalid && showingForm.get('movieId')?.touched"
                        class="p-error">Movie is required</small>
                </div>

                <div class="col-12 md:col-6 field">
                    <label for="theaterId">Theater</label>
                    <p-dropdown id="theaterId" [options]="theaters" optionLabel="name" optionValue="id"
                        formControlName="theaterId" placeholder="Select a theater" [filter]="true"
                        class="w-full"></p-dropdown>
                    <small *ngIf="showingForm.get('theaterId')?.invalid && showingForm.get('theaterId')?.touched"
                        class="p-error">Theater is required</small>
                </div>

                <div class="col-12 md:col-6 field">
                    <label for="startTime">Start Time</label>
                    <p-calendar id="startTime" formControlName="startTime" [showTime]="true" [showSeconds]="false"
                        [showIcon]="true" class="w-full"></p-calendar>
                    <small *ngIf="showingForm.get('startTime')?.invalid && showingForm.get('startTime')?.touched"
                        class="p-error">Start time is required</small>
                </div>

                <div class="col-12 flex gap-2">
                    <p-button label="Cancel" styleClass="p-button-secondary" type="button"
                        routerLink="/showings"></p-button>
                    <p-button [label]="isEditMode ? 'Update' : 'Create'" type="submit"
                        [disabled]="showingForm.invalid"></p-button>
                </div>
            </div>
        </form>
    </p-card>
</div>

<p-toast></p-toast>
